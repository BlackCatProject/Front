<div class="container">
  <div class="dashboard">
    <!-- Seção de Boas-Vindas -->
    <div class="welcome-section">
      <img src="https://i.pinimg.com/originals/37/64/bb/3764bbd40bc58c1dcecce505bef42c3c.gif" alt="Mascote" class="mascot-image">
      <h1>Bem-vindo!</h1>
      <div class="btn-container"> <!-- Novo contêiner flexível -->
        <a href="admin/venda" class="btn">Realizar Vendas</a>
      </div>
    </div>

    <!-- Seção de Histórico -->
    <div class="historico-section">
      <div class="historico-header">
        <h3><i class="fas fa-shopping-cart icon-color"></i> Histórico de Vendas</h3>
     
      </div>
      <div class="table-scroll"> <!-- Usando a classe de rolagem -->
        <table class="table"> <!-- Usando a classe de tabela -->
          <thead>
            <tr>
              <th scope="col">Data</th>
              <th scope="col">Total</th>
              <th scope="col">Forma de Pagamento</th>
              <th scope="col">Usuário</th>
              <th scope="col">Detalhes</th>
            </tr>
          </thead>
          <tbody>
            @for (venda of historicoVendas; track $index) {
              <tr>
                <td>{{ venda.data | date: 'shortDate' }}</td>
                <td>{{ venda.total | currency:'BRL' }}</td>
                <td>{{ venda.formaPagamento }}</td>
                <td>{{ venda.usuario.nome }}</td>
                <td>
                  <button
                    type="button"
                    class="btn btn-md  btn-rounded mt-2"
                    mdbRipple
                    (click)="openModal(venda)"
                  >
                    +
                  </button>
                </td>
              </tr>
              
            }
          </tbody>
        </table>
      </div>
    </div>

    <!-- Seção de Painéis de Vendas -->
    <div class="sales-panels">
      <div class="card monthly-sales">
        <h5><i class="fas fa-calendar-alt icon-color"></i> Vendas Mensais</h5>
        <div class="input-group">
          <div><input type="number" id="mes" [(ngModel)]="mes" (change)="getVendasMensais()" min="1" max="12" class="input-small no-spin-input"></div>
          <div><input type="number" id="ano" [(ngModel)]="ano" (change)="getVendasMensais()" class="input-small no-spin-input"></div>
        </div>
        <p>Total: {{ vendasPorMes | currency:'BRL' }}</p>
      </div>

     <!-- Vendas Anuais -->
<div class="card annual-sales-card">
  <h5><i class="fas fa-calendar-alt icon-color"></i> Vendas Anuais</h5>
  <input type="number" [(ngModel)]="ano" (change)="getVendasAnuais()" class="input-small no-spin-input">
  <p>Total: {{ vendasAnuais | currency:'BRL' }}</p>
</div>


      <!-- Vendas Semanais -->
      <div class="card weekly-sales">
        <h5><i class="fas fa-money-bill-wave icon-color"></i> Vendas Semanais</h5>
        <p>Total: {{ vendasSemanais | currency:'BRL' }}</p>
    </div>
    
    </div>
  </div>
</div>



<ng-template #modalVenda>
  <div class="modal-header">
    <h3 class="modal-title" id="modal-basic-title">Detalhes da venda</h3>
    <button
      type="button"
      class="btn-close"
      aria-label="Close"
      (click)="modalRef.close()"
    ></button>
  </div>
  <div class="modal-body">
    <p>
      <strong>{{ selectVenda?.data | date }}</strong>
    </p>
    <p>
      <strong>{{ selectVenda?.usuario?.nome }}</strong>
    </p>
    <p>
      <strong>{{ selectVenda?.formaPagamento }}</strong>
    </p>
    <p>
      <strong>{{ selectVenda?.total | currency : "BRL" }}</strong>
    </p>

    <h6>Produtos:</h6>
    @for ( produto of selectVenda?.produtosVenda; track produto.id) {
    <div>
      <p><strong>Nome:</strong> {{ produto.produto.nome }}</p>
      <p><strong>Quantidade:</strong> {{ produto.quantidade }}</p>
      <p>
        <strong>Preço:</strong> {{ produto.produto.preco | currency : "BRL" }}
      </p>
      <hr />
    </div>
    }
  </div>
</ng-template>
